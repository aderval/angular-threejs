!function(){"use strict";function e(e,n,o,t){function a(){d=window.WebGLRenderingContext?new THREE.WebGLRenderer({alpha:!0,antialias:!0}):new THREE.CanvasRenderer({alpha:!0}),d.setPixelRatio(window.devicePixelRatio)}function r(){d.enableScissorTest(!1),d.setClearColor(0,0)}var d;o.defer();return d||a(),e.log("THREE.js loaded OK!"),{load:function(){return e.log("THREE.js loading..."),window.THREE},getRenderer:function(){return r(),d}}}e.$inject=["$log","$document","$q","$rootScope"],angular.module("threejs",[]),angular.module("threejs").factory("THREEService",e)}(),function(){"use strict";function e(e,n,o,t){var a={loaded:[]};return{load:function(n){var t=this,r=[];return angular.forEach(n,function(e,n){for(var o=!0,d=a.loaded.length-1;d>=0;d--)a.loaded[n]==e&&(o=!1);if(o){var u=t.add(e);r.push(u)}}),o.all(r).then(function(n){return n.length>0&&e.info("THREE.js plugins loaded: "+n),window.THREE})},add:function(r){function d(){t.$apply(function(){a.loaded.push(r),e.debug(a.loaded),u.resolve(r)})}var u=o.defer(),i=n[0].createElement("script");i.type="text/javascript",i.src="assets/js/"+r+".js",i.async=!0,i.onreadystatechange=function(){"complete"==this.readyState&&d()},i.onload=d;var l=n[0].getElementsByTagName("body")[0];return l.appendChild(i),u.promise},remove:function(n){angular.forEach(a.loaded,function(o,t){o==n&&(a.loaded[t].pop(),e.info("THREE.js plugin "+n+" removed."))})}}}e.$inject=["$log","$document","$q","$rootScope"],angular.module("threejs").factory("THREEPlugins",e)}(),function(){"use strict";function e(e,n,o,t,a){var r={loaded:[]};return{load:function(e){n.debug(e);var o=this,a=[];return angular.forEach(e,function(e,n){for(var t=!0,d=r.loaded.length-1;d>=0;d--)r.loaded[n]==e&&(t=!1);if(t){var u=o.add(n,e);a.push(u)}}),t.all(a).then(function(e){return e.length>0&&n.debug("Images loaded: "+e),window.THREE})},add:function(e,o){var d=t.defer(),u=new THREE.LoadingManager;u.onProgress=function(e,o,t){n.debug(e,o,t)},u.onLoad=function(){a.$apply(function(){d.resolve(o)})};var i=new THREE.Texture,l=function(e){if(e.lengthComputable){var o=e.loaded/e.total*100;n.debug(Math.round(o,2)+"% downloaded")}},c=function(e){},f=new THREE.TextureLoader(u);return f.load(o,function(n){i=n,i.name=e,r.loaded.push(i)},l,c),d.promise},remove:function(e){angular.forEach(r.loaded,function(o,t){o==e&&(r.loaded[t].pop(),n.info("Removed "+e+" texture."))})},get:function(e){var o,t;if(void 0!==e||e!==!1)for(var a=r.loaded.length-1;a>=0;a--)r.loaded[a].name===e&&(o=r.loaded[a],t=!0,n.info('Texture "'+e+'" found!'));return t||(o=r.loaded[0],n.warn('Texture "'+e+'" not found: returning "'+o.name+'."')),n.debug(o),o}}}e.$inject=["THREEService","$log","$document","$q","$rootScope"],angular.module("threejs").factory("THREETextures",e)}();